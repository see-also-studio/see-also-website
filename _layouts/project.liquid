---
layout: default
---
{%- assign projects = site.projects | sort: 'order' -%}
{%- for project in projects -%}
  {%- if project.url == page.url -%}
    {%- assign currentIndex = forloop.index0 -%}
    {%- assign prevIndex = currentIndex | minus: 1 -%}
    {%- assign nextIndex = currentIndex | plus: 1 -%}
    {%- assign projectsLength = forloop.length | minus: 1 -%}

    {%- if currentIndex == projectsLength -%}
      {%- assign prevProject = projects[prevIndex] -%}
      {%- assign nextProject = projects[0] -%}
    {%- endif-%}

    {%- if currentIndex < projectsLength and currentIndex != 0 -%}
      {%- assign prevProject = projects[prevIndex] -%}
      {%- assign nextProject = projects[nextIndex] -%}
    {%- endif -%}

    {%- if currentIndex == 0 -%}
      {%- assign prevProject = projects[projectsLength] -%}
      {%- assign nextProject = projects[nextIndex] -%}
    {%- endif -%}
  {%- endif -%}
{%- endfor -%%}

<div class="project" data-previous="{{ prevProject.url }}" data-next="{{ nextProject.url }}">

  {% include project_gallery.liquid %}

  <div class="content project__content">
    <div class="project__header">
      <h2 class="project__title">{{ page.title }}</h2>
      <span class="project__date">{{ page.year }}{% if page.yearEnd %}–⁠{{ page.yearEnd }}{% endif %}</span>
    </div>
    {% if page.tags %}
    <ul class="project__tags">
      {% for tag in page.tags %}
      <li>{{ tag }}</li>
      {% endfor %}
    </ul>
    {% endif %}
    {{ content }}
  </div>

</div>
